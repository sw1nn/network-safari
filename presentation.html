<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Networks for developing</title>
<meta name="author" content="Neale Swinnerton"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="./reveal.js/dist/reveal.css"/>

<link rel="stylesheet" href="./reveal.js/dist/theme/solarized.css" id="theme"/>

<link rel="stylesheet" href="./presentation.css"/>
<link rel="stylesheet" href="./reveal.js/plugin/highlight/zenburn.css"/></head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide" data-background="./img/title2-darker.png"><h1 class="title">Networks for developing</h1><p class="subtitle">Putting the <b>works</b> into networks</p>
<h2 class="author">Neale Swinnerton</h2><h2 class="date">2023-01-18</h2>
</section>
<section id="sec-table-of-contents" data-background="./img/agenda.png" data-background-size="800px" data-background-position="right" data-background-opacity="0.2"><div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#/slide-org230d18f">Prerequisites</a></li>
<li><a href="#/slide-org519b6af">Terminology</a></li>
<li><a href="#/slide-orga409b27">Why is it DNS?</a></li>
<li><a href="#/slide-org603a902">graph</a></li>
<li><a href="#/slide-org5660abf">iptables et al.</a></li>
<li><a href="#/slide-org9d98359">{ip,ip6,arp,eb}tables</a></li>
<li><a href="#/slide-orged162ef">Packet Capture FTW</a></li>
<li><a href="#/slide-orgac258b9">Cloud (AWS Specific, but other providers have comparable)</a></li>
<li><a href="#/slide-org3cfe906">Cloud</a></li>
<li><a href="#/slide-org135e525">Cloud</a></li>
</ul>
</div>
</div>
</section>

<section>
<section id="slide-org230d18f" data-background-position="right" data-background-opacity="0.2">
<h2 id="org230d18f">Prerequisites</h2>
<ul>
<li><code>net-tools</code> package ( <code>ifconfig(8)</code>, <code>route(8)</code>, <code>arp(8)</code> and <code>netstat(1)</code> et al.) has been deprecated for over 10 years.</li>
<li>prefer <code>iproute2</code> package. All functions of net-tools and more are available.</li>
<li>Standardised interface and output. Also <code>--json</code> option makes parsing nicer.</li>

</ul>

</section>
</section>
<section>
<section id="slide-org519b6af" data-background="./img/terminology.jpg" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">
<h2 id="org519b6af">Terminology</h2>
<ul>
<li><p>
<code>ip link</code>
</p>
<div class="r-stack ip_link" id="orgda7fb3c">
<p data-fragment-index="1" class="fragment fade-in-then-out">
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</p>
<div class="org-src-container">

<pre   ><code class="dns" >||||||| parent of 46d680f (Final build.)
   #+begin_src routeros
=======
   #+BEGIN_link1
   #+begin_example shell :wrap src routeros :exports both :results verbatim
      ip link show
   #+end_example

   #+begin_src routeros
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
   1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
       link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
   2: wg0: &lt;POINTOPOINT,NOARP&gt; mtu 1420 qdisc noop state DOWN mode DEFAULT group default qlen 1000
       link/none
   3: enp88s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
       link/ether 48:21:0b:36:d3:08 brd ff:ff:ff:ff:ff:ff
   4: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000
       link/ether 84:7b:57:20:f9:54 brd ff:ff:ff:ff:ff:ff
       altname wlp0s20f3
   5: tun0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UNKNOWN mode DEFAULT group default qlen 500
       link/none
</code></pre>
</div>
<p>
#+END<sub>link1</sub>
</p>

<div data-fragment-index="2" class="fragment fade-in-then-out link2" id="org1f7233b">
<pre class="example" id="org7457e10">
ip link show #when docker running
</pre>

<p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</p>
<table id="org7e61610" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" data-fragment-index="2" class="fragment appear">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">parent of 46d680f (Final build.)</td>
</tr>
</tbody>
</table>
<p data-fragment-index="2" class="fragment appear">
<code>=====</code>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
</p>
<div class="org-src-container">

<pre   ><code class="routeros" >1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: wg0: &lt;POINTOPOINT,NOARP&gt; mtu 1420 qdisc noop state DOWN mode DEFAULT group default qlen 1000
    link/none
3: enp88s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc mq state DOWN mode DEFAULT group default qlen 1000
    link/ether 48:21:0b:36:d3:08 brd ff:ff:ff:ff:ff:ff
4: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000
    link/ether 84:7b:57:20:f9:54 brd ff:ff:ff:ff:ff:ff
    altname wlp0s20f3
5: tun0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UNKNOWN mode DEFAULT group default qlen 500
    link/none
6: br-838b7f23bb93: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default
    link/ether 02:42:82:04:a9:90 brd ff:ff:ff:ff:ff:ff
7: br-88ded7088275: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default
    link/ether 02:42:66:71:f3:b8 brd ff:ff:ff:ff:ff:ff
8: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default
    link/ether 02:42:38:a1:bf:e9 brd ff:ff:ff:ff:ff:ff
</code></pre>
</div>

</div>

<div data-fragment-index="3" class="fragment appear link3" id="org0678f04">
<div class="org-src-container">

<pre   ><code class="shell" >ip --pretty --json link show enp88s0 # also see --details flag
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="json" >[ {
        "ifindex": 3,
        "ifname": "enp88s0",
        "flags": [ "BROADCAST","MULTICAST","UP","LOWER_UP" ],
        "mtu": 1500,
        "qdisc": "mq",
        "operstate": "UP",
        "linkmode": "DEFAULT",
        "group": "default",
        "txqlen": 1000,
        "link_type": "ether",
        "address": "48:21:0b:36:d3:08",
        "broadcast": "ff:ff:ff:ff:ff:ff"
    } ]
</code></pre>
</div>

</div>

</div></li>

</ul>

</section>
<section id="slide-org519b6af-split" data-background="./img/terminology.jpg" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">

<h2>Terminology</h2>
<ul>
<li><p>
ip addr show [devname]
</p>
<div class="r-stack ip_addr" id="orgcdf9a14">
<div class="org-src-container">

<pre  class="fragment fade-in-then-out" data-fragment-index="1"  ><code class="routeros" >4: wlo1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 84:7b:57:20:f9:54 brd ff:ff:ff:ff:ff:ff
    altname wlp0s20f3
    inet 192.168.1.177/24 metric 1024 brd 192.168.1.255 scope global dynamic wlo1
       valid_lft 80828sec preferred_lft 80828sec
    inet6 2a00:23c7:621c:f201:867b:57ff:fe20:f954/64 scope global dynamic mngtmpaddr noprefixroute 
       valid_lft 263sec preferred_lft 83sec
    inet6 fe80::867b:57ff:fe20:f954/64 scope link 
       valid_lft forever preferred_lft forever
</code></pre>
</div>
<p>
#+END<sub>wlo1</sub>
</p>

<p data-fragment-index="2" class="fragment fade-in-then-out">
#+begin<sub>tun0</sub>
</p>

<div class="org-src-container">

<pre   ><code class="shell" >    ip addr show dev tun0
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >5: tun0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 500
    link/none 
    inet 172.16.146.116/26 brd 172.16.146.127 scope global tun0
       valid_lft forever preferred_lft forever
    inet6 fe80::a9bc:8cdc:23b7:7607/64 scope link stable-privacy 
       valid_lft forever preferred_lft forever
</code></pre>
</div>

<div class="org-src-container">

<pre  class="fragment fade-in-then-out" data-fragment-index="2"  ><code class="routeros" >5: tun0: &lt;POINTOPOINT,MULTICAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 500
    link/none 
    inet 172.16.146.116/26 brd 172.16.146.127 scope global tun0
       valid_lft forever preferred_lft forever
    inet6 fe80::a9bc:8cdc:23b7:7607/64 scope link stable-privacy 
       valid_lft forever preferred_lft forever
</code></pre>
</div>

<div class="org-src-container">

<pre  class="fragment appear" data-fragment-index="3"  ><code class="routeros" >2: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none 
    inet 10.9.0.7/24 metric 512 scope global wg0
       valid_lft forever preferred_lft forever
</code></pre>
</div>
<p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">parent of 46d680f (Final build.)</td>
</tr>
</tbody>
</table>
<p>
#+END<sub>wg0</sub>
</p>

<div data-fragment-index="4" class="fragment appear enp88s0" id="org64040b2">
<div class="org-src-container">

<pre   ><code class="shell" >ip addr show dev enp88s0
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >3: enp88s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 48:21:0b:36:d3:08 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.99/24 metric 512 brd 192.168.1.255 scope global dynamic enp88s0
       valid_lft 80719sec preferred_lft 80719sec
    inet6 2a00:23c7:621c:f201:4a21:bff:fe36:d308/64 scope global dynamic mngtmpaddr noprefixroute 
       valid_lft 263sec preferred_lft 83sec
    inet6 fe80::4a21:bff:fe36:d308/64 scope link 
       valid_lft forever preferred_lft forever
</code></pre>
</div>

</div>
<p>
<code>=====</code>
   #+END<sub>wg0</sub>
</p>

<div data-fragment-index="4" class="fragment fade-in-then-out enp88s0" id="org56b737b">
<div class="org-src-container">

<pre   ><code class="shell" >ip addr show dev enp88s0
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >3: enp88s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000
    link/ether 48:21:0b:36:d3:08 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.99/24 metric 512 brd 192.168.1.255 scope global dynamic enp88s0
       valid_lft 80719sec preferred_lft 80719sec
    inet6 2a00:23c7:621c:f201:4a21:bff:fe36:d308/64 scope global dynamic mngtmpaddr noprefixroute 
       valid_lft 263sec preferred_lft 83sec
    inet6 fe80::4a21:bff:fe36:d308/64 scope link 
       valid_lft forever preferred_lft forever
</code></pre>
</div>

</div>

<div data-fragment-index="5" class="fragment appear sipcalc" id="orgfe891f6">
<div class="org-src-container">

<pre   ><code class="shell" >sipcalc 172.16.146.116/26
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >-[ipv4 : 172.16.146.116/26] - 0

[CIDR]
Host address		- 172.16.146.116
Host address (decimal)	- 2886767220
Host address (hex)	- AC109274
Network address		- 172.16.146.64
Network mask		- 255.255.255.192
Network mask (bits)	- 26
Network mask (hex)	- FFFFFFC0
Broadcast address	- 172.16.146.127
Cisco wildcard		- 0.0.0.63
Addresses in network	- 64
Network range		- 172.16.146.64 - 172.16.146.127
Usable range		- 172.16.146.65 - 172.16.146.126

-
</code></pre>
</div>

</div>
<p>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
</p>

</div></li>

</ul>

<p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</p>
</section>
<section id="slide-org519b6af-split" data-background="./img/terminology.jpg" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">

<h2>Terminology</h2>
<ul>
<li>protocols</li>

</ul>
</section>
<section id="slide-org519b6af-split" data-background="./img/terminology.jpg" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">

<h2>Terminology</h2>
<ul>
<li>routes</li>

</ul>
</section>
<section id="slide-org519b6af-split" data-background="./img/terminology.jpg" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">

<h2>Terminology</h2>
<ul>
<li>bridges</li>

</ul>
</section>
<section id="slide-org519b6af-split" data-background="./img/terminology.jpg" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">

<h2>Terminology</h2>
<ul>
<li>tun devices</li>

</ul>
</section>
<section id="slide-org519b6af-split" data-background="./img/terminology.jpg" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">

<h2>Terminology</h2>
<ul>
<li>Miscellaneous
<ul>
<li><code>MTU</code> <code>QDISC</code> <code>QLEN</code></li>
<li><code>SO_LINGER</code> <code>SO_NODELAY</code></li>

</ul></li>

</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">parent of 46d680f (Final build.)</td>
</tr>
</tbody>
</table>
</section>
<section id="slide-org6b037f7" data-background-position="right" data-background-opacity="0.2">
<h3 id="org6b037f7">ip route</h3>
<div class="org-src-container">

<pre   ><code class="sh" >ip route show | grep -v tun0
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >default via 192.168.1.254 dev enp88s0 proto dhcp src 192.168.1.99 metric 512 
default via 192.168.1.254 dev wlo1 proto dhcp src 192.168.1.177 metric 1024 
10.9.0.0/24 dev wg0 proto kernel scope link src 10.9.0.7 metric 512 
10.42.10.0/24 dev br-46b699d0a4fe proto kernel scope link src 10.42.10.1 
172.18.0.0/16 dev br-88ded7088275 proto kernel scope link src 172.18.0.1 linkdown 
172.26.0.0/24 dev docker0 proto kernel scope link src 172.26.0.1 linkdown 
192.168.1.0/24 dev enp88s0 proto kernel scope link src 192.168.1.99 metric 512 
192.168.1.0/24 dev wlo1 proto kernel scope link src 192.168.1.177 metric 1024 
192.168.1.254 dev enp88s0 proto dhcp scope link src 192.168.1.99 metric 512 
192.168.1.254 dev wlo1 proto dhcp scope link src 192.168.1.177 metric 1024 
213.218.143.135 via 192.168.1.254 dev enp88s0 
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="sh" >routel | grep -v tun0
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >Dst             Gateway         Prefsrc         Protocol Scope   Dev              Table
default         192.168.1.254   192.168.1.99    dhcp             enp88s0          
default         192.168.1.254   192.168.1.177   dhcp             wlo1             
10.9.0.0/24                     10.9.0.7        kernel   link    wg0              
10.42.10.0/24                   10.42.10.1      kernel   link    br-46b699d0a4fe  
172.18.0.0/16                   172.18.0.1      kernel   link    br-88ded7088275  
172.26.0.0/24                   172.26.0.1      kernel   link    docker0          
192.168.1.0/24                  192.168.1.99    kernel   link    enp88s0          
192.168.1.0/24                  192.168.1.177   kernel   link    wlo1             
192.168.1.254                   192.168.1.99    dhcp     link    enp88s0          
192.168.1.254                   192.168.1.177   dhcp     link    wlo1             
213.218.143.135 192.168.1.254                                    enp88s0          
10.9.0.7                        10.9.0.7        kernel   host    wg0              local
10.9.0.255                      10.9.0.7        kernel   link    wg0              local
10.42.10.1                      10.42.10.1      kernel   host    br-46b699d0a4fe  local
10.42.10.255                    10.42.10.1      kernel   link    br-46b699d0a4fe  local
127.0.0.0/8                     127.0.0.1       kernel   host    lo               local
127.0.0.1                       127.0.0.1       kernel   host    lo               local
127.255.255.255                 127.0.0.1       kernel   link    lo               local
172.18.0.1                      172.18.0.1      kernel   host    br-88ded7088275  local
172.18.255.255                  172.18.0.1      kernel   link    br-88ded7088275  local
172.26.0.1                      172.26.0.1      kernel   host    docker0          local
172.26.0.255                    172.26.0.1      kernel   link    docker0          local
192.168.1.99                    192.168.1.99    kernel   host    enp88s0          local
192.168.1.177                   192.168.1.177   kernel   host    wlo1             local
192.168.1.255                   192.168.1.99    kernel   link    enp88s0          local
192.168.1.255                   192.168.1.177   kernel   link    wlo1             local
</code></pre>
</div>


</section>
<section id="slide-orgb129572" data-background-position="right" data-background-opacity="0.2">
<h3 id="orgb129572">bridges</h3>
<div class="org-src-container">

<pre   ><code class="sh" >ip link show type bridge
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >7: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:55:a7:03:b0 brd ff:ff:ff:ff:ff:ff
8: br-88ded7088275: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:8b:26:25:07 brd ff:ff:ff:ff:ff:ff
108: br-46b699d0a4fe: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT group default 
    link/ether 02:42:2b:fc:9b:17 brd ff:ff:ff:ff:ff:ff
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="shell" >docker network ls
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >NETWORK ID     NAME                  DRIVER    SCOPE
88ded7088275   Eiffel-strapi         bridge    local
9ce342a1ce54   bridge                bridge    local
cb20fdb51056   host                  host      local
46b699d0a4fe   network-safari_net0   bridge    local
70d3f12412e2   none                  null      local
</code></pre>
</div>

</section>
<section id="slide-org13bfe1a" data-background-position="right" data-background-opacity="0.2">
<h3 id="org13bfe1a">protocols</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">UDP</td>
<td class="org-left">connectionless, lossy</td>
</tr>

<tr>
<td class="org-left">TCP</td>
<td class="org-left">connection-oriented, congestion-controlled, reliable</td>
</tr>

<tr>
<td class="org-left">ICMP</td>
<td class="org-left">control protocol, more important for ipv6 (ping uses this)</td>
</tr>

<tr>
<td class="org-left">IGMP</td>
<td class="org-left">group control protocol, used for multicast</td>
</tr>

<tr>
<td class="org-left">DHCP</td>
<td class="org-left">host configuration protocol - dynamic IP, routes etc.</td>
</tr>

<tr>
<td class="org-left">NTP</td>
<td class="org-left">Network time protocol</td>
</tr>
</tbody>
</table>

</section>
<section id="slide-org13bfe1a-split" data-background-position="right" data-background-opacity="0.2">

<h3>protocols</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">HTTP(S)</td>
<td class="org-left">Old faithful (TCP, TLS)</td>
</tr>

<tr>
<td class="org-left">QUIC (colloquially TCP/2)</td>
<td class="org-left">low latency, multiplexed, error-corrected, reliable, UDP/TLS based</td>
</tr>

<tr>
<td class="org-left">HTTP/3</td>
<td class="org-left">HTTP over QUIC</td>
</tr>
</tbody>
</table>


</section>
<section id="slide-orgcc051fe" data-background="./img/dependency.png" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">
<h4 id="orgcc051fe">DHCP - Dynamic Host Configuration Protocol</h4>
<ul>
<li>IP address leases</li>
<li>Gateways</li>
<li>Hostname</li>
<li>Domain name</li>
<li>Domain name server</li>
<li>Domain search lists</li>
<li>Static Routes</li>
<li>Time Servers</li>
<li>Time Zone</li>

</ul>

</section>
<section id="slide-org6288b66" data-background-position="right" data-background-opacity="0.2">
<h3 id="org6288b66">Miscellaneous</h3>
<ul>
<li>link parameters
<ul>
<li><code>MTU</code></li>
<li><code>QDISC</code></li>
<li><code>QLEN</code></li>

</ul></li>
<li>socket options
<ul>
<li><code>SO_LINGER</code></li>
<li><code>SO_NODELAY</code></li>

</ul></li>

</ul>
<p>
<code>=====</code>
</p>
</section>
<section id="slide-orga10280b" data-background-position="right" data-background-opacity="0.2">
<h3 id="orga10280b">ip route</h3>
<div class="r-stack ip_route" id="orge9ebf3f">
<p>

</p>

<div data-fragment-index="1" class="fragment fade-in-then-out route1" id="orgcf64a7b">
<div class="org-src-container">

<pre   ><code class="sh" >ip route show | grep -v tun0
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >default via 192.168.1.254 dev enp88s0 proto dhcp src 192.168.1.99 metric 512 
default via 192.168.1.254 dev wlo1 proto dhcp src 192.168.1.177 metric 1024 
10.9.0.0/24 dev wg0 proto kernel scope link src 10.9.0.7 metric 512 
10.42.10.0/24 dev br-46b699d0a4fe proto kernel scope link src 10.42.10.1 
172.18.0.0/16 dev br-88ded7088275 proto kernel scope link src 172.18.0.1 linkdown 
172.26.0.0/24 dev docker0 proto kernel scope link src 172.26.0.1 linkdown 
192.168.1.0/24 dev enp88s0 proto kernel scope link src 192.168.1.99 metric 512 
192.168.1.0/24 dev wlo1 proto kernel scope link src 192.168.1.177 metric 1024 
192.168.1.254 dev enp88s0 proto dhcp scope link src 192.168.1.99 metric 512 
192.168.1.254 dev wlo1 proto dhcp scope link src 192.168.1.177 metric 1024 
213.218.143.135 via 192.168.1.254 dev enp88s0 
</code></pre>
</div>

</div>

<div data-fragment-index="2" class="fragment appear route2" id="org2a59eb0">
<div class="org-src-container">

<pre   ><code class="sh" >routel | grep -v tun0
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >Dst             Gateway         Prefsrc         Protocol Scope   Dev              Table
default         192.168.1.254   192.168.1.99    dhcp             enp88s0          
default         192.168.1.254   192.168.1.177   dhcp             wlo1             
10.9.0.0/24                     10.9.0.7        kernel   link    wg0              
10.42.10.0/24                   10.42.10.1      kernel   link    br-46b699d0a4fe  
172.18.0.0/16                   172.18.0.1      kernel   link    br-88ded7088275  
172.26.0.0/24                   172.26.0.1      kernel   link    docker0          
192.168.1.0/24                  192.168.1.99    kernel   link    enp88s0          
192.168.1.0/24                  192.168.1.177   kernel   link    wlo1             
192.168.1.254                   192.168.1.99    dhcp     link    enp88s0          
192.168.1.254                   192.168.1.177   dhcp     link    wlo1             
213.218.143.135 192.168.1.254                                    enp88s0          
10.9.0.7                        10.9.0.7        kernel   host    wg0              local
10.9.0.255                      10.9.0.7        kernel   link    wg0              local
10.42.10.1                      10.42.10.1      kernel   host    br-46b699d0a4fe  local
10.42.10.255                    10.42.10.1      kernel   link    br-46b699d0a4fe  local
127.0.0.0/8                     127.0.0.1       kernel   host    lo               local
127.0.0.1                       127.0.0.1       kernel   host    lo               local
127.255.255.255                 127.0.0.1       kernel   link    lo               local
172.18.0.1                      172.18.0.1      kernel   host    br-88ded7088275  local
172.18.255.255                  172.18.0.1      kernel   link    br-88ded7088275  local
172.26.0.1                      172.26.0.1      kernel   host    docker0          local
172.26.0.255                    172.26.0.1      kernel   link    docker0          local
192.168.1.99                    192.168.1.99    kernel   host    enp88s0          local
192.168.1.177                   192.168.1.177   kernel   host    wlo1             local
192.168.1.255                   192.168.1.99    kernel   link    enp88s0          local
192.168.1.255                   192.168.1.177   kernel   link    wlo1             local
</code></pre>
</div>

</div>

</div>

</section>
<section id="slide-orgfd9b3b2" data-background-position="right" data-background-opacity="0.2">
<h3 id="orgfd9b3b2">bridges</h3>
<div class="org-src-container">

<pre   ><code class="sh" >ip link show type bridge
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >7: docker0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:55:a7:03:b0 brd ff:ff:ff:ff:ff:ff
8: br-88ded7088275: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default 
    link/ether 02:42:8b:26:25:07 brd ff:ff:ff:ff:ff:ff
108: br-46b699d0a4fe: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP mode DEFAULT group default 
    link/ether 02:42:2b:fc:9b:17 brd ff:ff:ff:ff:ff:ff
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="shell" >docker network ls
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="routeros" >NETWORK ID     NAME                  DRIVER    SCOPE
88ded7088275   Eiffel-strapi         bridge    local
9ce342a1ce54   bridge                bridge    local
cb20fdb51056   host                  host      local
46b699d0a4fe   network-safari_net0   bridge    local
70d3f12412e2   none                  null      local
</code></pre>
</div>

</section>
<section id="slide-org1c96857" data-background-position="right" data-background-opacity="0.2">
<h3 id="org1c96857">protocols</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">UDP</td>
<td class="org-left">connectionless, lossy</td>
</tr>

<tr>
<td class="org-left">TCP</td>
<td class="org-left">connection-oriented, congestion-controlled, reliable</td>
</tr>

<tr>
<td class="org-left">ICMP</td>
<td class="org-left">control protocol, more important for ipv6 (ping uses this)</td>
</tr>

<tr>
<td class="org-left">IGMP</td>
<td class="org-left">group control protocol, used for multicast</td>
</tr>

<tr>
<td class="org-left">DHCP</td>
<td class="org-left">host configuration protocol - dynamic IP, routes etc.</td>
</tr>

<tr>
<td class="org-left">NTP</td>
<td class="org-left">Network time protocol</td>
</tr>
</tbody>
</table>

</section>
<section id="slide-org1c96857-split" data-background-position="right" data-background-opacity="0.2">

<h3>protocols</h3>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">HTTP(S)</td>
<td class="org-left">Old faithful (TCP, TLS)</td>
</tr>

<tr>
<td class="org-left">QUIC (colloquially TCP/2)</td>
<td class="org-left">low latency, multiplexed, error-corrected, reliable, UDP/TLS based</td>
</tr>

<tr>
<td class="org-left">HTTP/3</td>
<td class="org-left">HTTP over QUIC</td>
</tr>
</tbody>
</table>


</section>
<section id="slide-org1c4e048" data-background="./img/dependency.png" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">
<h4 id="org1c4e048">DHCP - Dynamic Host Configuration Protocol</h4>
<ul>
<li>IP address leases</li>
<li>Gateways</li>
<li>Hostname</li>
<li>Domain name</li>
<li>Domain name server</li>
<li>Domain search lists</li>
<li>Static Routes</li>
<li>Time Servers</li>
<li>Time Zone</li>

</ul>

</section>
<section id="slide-org06b94e8" data-background-position="right" data-background-opacity="0.2">
<h3 id="org06b94e8">Miscellaneous</h3>
<ul>
<li>link parameters
<ul>
<li><code>MTU</code></li>
<li><code>QDISC</code></li>
<li><code>QLEN</code></li>

</ul></li>
<li>socket options
<ul>
<li><code>SO_LINGER</code></li>
<li><code>SO_NODELAY</code></li>

</ul></li>

</ul>
<p>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
</p>

</section>
</section>
<section>
<section id="slide-orga409b27" data-background="./img/its_always_dns.jpg" data-background-size="800px" data-background-position="right" data-background-opacity="0.2">
<h2 id="orga409b27">Why is it DNS?</h2>
</section>
<section id="slide-orgc5d61fe" data-background-position="right" data-background-opacity="0.2">
<h3 id="orgc5d61fe">Hardest problems in Computer Science</h3>
<ul>
<li>Naming</li>
<li>Caching</li>
<li>Recursion</li>
<li>Distributed
<ul>
<li>unreliable</li>
<li>badly (or maliciously) configured</li>

</ul></li>

</ul>

</section>
<section id="slide-orgfdfe0ce" data-background-position="right" data-background-opacity="0.2">
<h3 id="orgfdfe0ce">Context</h3>
<ul>
<li>Old Protocol (1987) - RFC1034 / RFC1035
<ul>
<li>Updated by 1101, 1183, 1348, 1876, 1982, 1995, 1996, 2065, 2136, 2181, 2137, 2308, 2535, 2673, 2845, 3425, 3658, 4033, 4034, 4035, 4343, 5936, 5966, 6604, 7766, 8482, 8490, 8767</li>

</ul></li>
<li>First step for most network interactions - performance is critical for interactivity.</li>
<li>We trusted back then. What is Authority? (DNSSec introduces crypto - another problem)</li>

</ul>

</section>
<section id="slide-org2c08100" data-background-position="right" data-background-opacity="0.2">
<h3 id="org2c08100">What is stored in DNS?</h3>
<pre class="example" id="org54ff8c5">
dig +nocomments any sw1nn.com | sort -r -k 1 -k 4
</pre>

<div class="org-src-container">

<pre   ><code class="dns" >&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
;; WHEN: Sun Jan 08 16:21:34 GMT 2023
||||||| parent of 46d680f (Final build.)
;; WHEN: Mon Jan 16 06:53:30 GMT 2023
=======
;; WHEN: Wed Jan 18 09:52:27 GMT 2023
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
;sw1nn.com.			IN	ANY
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
sw1nn.com.		946	IN	NS	ns-895.awsdns-47.net.
sw1nn.com.		946	IN	NS	ns-427.awsdns-53.com.
sw1nn.com.		946	IN	NS	ns-1668.awsdns-16.co.uk.
sw1nn.com.		946	IN	NS	ns-1409.awsdns-48.org.
sw1nn.com.		946	IN	MX	5 alt2.aspmx.l.google.com.
sw1nn.com.		946	IN	MX	5 alt1.aspmx.l.google.com.
sw1nn.com.		946	IN	MX	1 aspmx.l.google.com.
sw1nn.com.		946	IN	MX	10 alt4.aspmx.l.google.com.
sw1nn.com.		946	IN	MX	10 alt3.aspmx.l.google.com.
sw1nn.com.		900	IN	SOA	ns-895.awsdns-47.net. awsdns-hostmaster.amazon.com. 1 7200 900 1209600 86400
sw1nn.com.		60	IN	A	143.204.68.64
sw1nn.com.		60	IN	A	143.204.68.6
sw1nn.com.		60	IN	A	143.204.68.19
sw1nn.com.		60	IN	A	143.204.68.109
sw1nn.com.		300	IN	TXT	"v=spf1 a:gw0.sw1nn.com include:_spf.google.com -all"
sw1nn.com.		300	IN	TXT	"keybase-site-verification=Sbl5DIqMz2YhOzwJRJ-42cuCc_5bi-IqcDgDoLI4xxY"
sw1nn.com.		300	IN	TXT	"google-site-verification=j9z8EzWtUwDq8euHd3e6BT9zcWMh7RpGasi4ldaXqeA"
sw1nn.com.		300	IN	CAA	0 issuewild ";"
sw1nn.com.		300	IN	CAA	0 issue "letsencrypt.org"
sw1nn.com.		300	IN	CAA	0 issue "awstrust.com"
sw1nn.com.		300	IN	CAA	0 issue "amazontrust.com"
sw1nn.com.		300	IN	CAA	0 issue "amazon.com"
sw1nn.com.		300	IN	CAA	0 issue "amazonaws.com"
||||||| parent of 46d680f (Final build.)
sw1nn.com.		917	IN	NS	ns-895.awsdns-47.net.
sw1nn.com.		917	IN	NS	ns-427.awsdns-53.com.
sw1nn.com.		917	IN	NS	ns-1668.awsdns-16.co.uk.
sw1nn.com.		917	IN	NS	ns-1409.awsdns-48.org.
sw1nn.com.		917	IN	MX	5 alt2.aspmx.l.google.com.
sw1nn.com.		917	IN	MX	5 alt1.aspmx.l.google.com.
sw1nn.com.		917	IN	MX	1 aspmx.l.google.com.
sw1nn.com.		917	IN	MX	10 alt4.aspmx.l.google.com.
sw1nn.com.		917	IN	MX	10 alt3.aspmx.l.google.com.
sw1nn.com.		900	IN	SOA	ns-895.awsdns-47.net. awsdns-hostmaster.amazon.com. 1 7200 900 1209600 86400
sw1nn.com.		60	IN	A	143.204.68.64
sw1nn.com.		60	IN	A	143.204.68.6
sw1nn.com.		60	IN	A	143.204.68.19
sw1nn.com.		60	IN	A	143.204.68.109
sw1nn.com.		300	IN	TXT	"v=spf1 a:gw0.sw1nn.com include:_spf.google.com -all"
sw1nn.com.		300	IN	TXT	"keybase-site-verification=Sbl5DIqMz2YhOzwJRJ-42cuCc_5bi-IqcDgDoLI4xxY"
sw1nn.com.		300	IN	TXT	"google-site-verification=j9z8EzWtUwDq8euHd3e6BT9zcWMh7RpGasi4ldaXqeA"
sw1nn.com.		300	IN	CAA	0 issuewild ";"
sw1nn.com.		300	IN	CAA	0 issue "letsencrypt.org"
sw1nn.com.		300	IN	CAA	0 issue "awstrust.com"
sw1nn.com.		300	IN	CAA	0 issue "amazontrust.com"
sw1nn.com.		300	IN	CAA	0 issue "amazon.com"
sw1nn.com.		300	IN	CAA	0 issue "amazonaws.com"
=======
sw1nn.com.		873	IN	SOA	ns-895.awsdns-47.net. awsdns-hostmaster.amazon.com. 1 7200 900 1209600 86400
sw1nn.com.		873	IN	NS	ns-895.awsdns-47.net.
sw1nn.com.		873	IN	NS	ns-427.awsdns-53.com.
sw1nn.com.		873	IN	NS	ns-1668.awsdns-16.co.uk.
sw1nn.com.		873	IN	NS	ns-1409.awsdns-48.org.
sw1nn.com.		873	IN	MX	5 alt2.aspmx.l.google.com.
sw1nn.com.		873	IN	MX	5 alt1.aspmx.l.google.com.
sw1nn.com.		873	IN	MX	1 aspmx.l.google.com.
sw1nn.com.		873	IN	MX	10 alt4.aspmx.l.google.com.
sw1nn.com.		873	IN	MX	10 alt3.aspmx.l.google.com.
sw1nn.com.		59	IN	A	143.204.68.64
sw1nn.com.		59	IN	A	143.204.68.6
sw1nn.com.		59	IN	A	143.204.68.19
sw1nn.com.		59	IN	A	143.204.68.109
sw1nn.com.		299	IN	TXT	"v=spf1 a:gw0.sw1nn.com include:_spf.google.com -all"
sw1nn.com.		299	IN	TXT	"keybase-site-verification=Sbl5DIqMz2YhOzwJRJ-42cuCc_5bi-IqcDgDoLI4xxY"
sw1nn.com.		299	IN	TXT	"google-site-verification=j9z8EzWtUwDq8euHd3e6BT9zcWMh7RpGasi4ldaXqeA"
sw1nn.com.		299	IN	CAA	0 issuewild ";"
sw1nn.com.		299	IN	CAA	0 issue "letsencrypt.org"
sw1nn.com.		299	IN	CAA	0 issue "awstrust.com"
sw1nn.com.		299	IN	CAA	0 issue "amazontrust.com"
sw1nn.com.		299	IN	CAA	0 issue "amazon.com"
sw1nn.com.		299	IN	CAA	0 issue "amazonaws.com"
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
;; SERVER: 127.0.0.53#53(127.0.0.53) (TCP)
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
;; Query time: 60 msec
||||||| parent of 46d680f (Final build.)
;; Query time: 26 msec
=======
;; Query time: 16 msec
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
;; MSG SIZE  rcvd: 826
;; global options: +cmd
; &lt;&lt;&gt;&gt; DiG 9.18.10 &lt;&lt;&gt;&gt; +nocomments +rrcomments any sw1nn.com


</code></pre>
</div>

</section>
<section id="slide-org37af065" data-background-position="right" data-background-opacity="0.2">
<h3 id="org37af065">Configuring your local DNS server</h3>
<ul>
<li><p>
How does your local machine resolve names?
</p>
<div class="org-src-container">
<label class="org-src-name">/etc/nsswitch.conf</label>
<pre   ><code class="src" >...

hosts: mymachines mdns_minimal [NOTFOUND=return] resolve [!UNAVAIL=return] files myhostname dns

...
</code></pre>
</div></li>

</ul>


<div class="org-src-container">
<label class="org-src-name">/etc/resolv.conf</label>
<pre   ><code class="src" >nameserver 192.168.0.1
nameserver 172.20.0.2
search home lan
</code></pre>
</div>

</section>
<section id="slide-org37af065-split" data-background-position="right" data-background-opacity="0.2">
<div class="org-src-container">
<label class="org-src-name">diff -uw /run/systemd/resolve/resolv.conf /run/systemd/resolve/stub-resolv.conf # (comments elided)</label>
<pre   ><code class="diff" >--- /dev/fd/63	2023-01-18 10:27:43.570011735 +0000
+++ /dev/fd/62	2023-01-18 10:27:43.570011735 +0000
@@ -1,6 +1,4 @@

-nameserver 192.168.1.254
-nameserver fe80::e675:dcff:fec3:6f93%3
-nameserver 192.168.1.254
-nameserver fe80::e675:dcff:fec3:6f93%4
+nameserver 127.0.0.53
+options edns0 trust-ad
 search ad.corp gcp.oscaro.internal oscaro.be oscaro.com oscaro.de oscaro.es oscaro.media oscaro.pt oscaro.team oscaroad.com blandford paxton home
</code></pre>
</div>

</section>
<section id="slide-org37af065-split" data-background-position="right" data-background-opacity="0.2">
<div class="org-src-container">

<pre  id="resolvectl_status" ><code class="sh" >resolvectl status
</code></pre>
</div>

<div class="org-src-container">

<pre   ><code class="sh" >Global
           Protocols: +LLMNR +mDNS -DNSOverTLS DNSSEC=no/unsupported
    resolv.conf mode: stub
Fallback DNS Servers: 1.1.1.1#cloudflare-dns.com 9.9.9.9#dns.quad9.net
                      8.8.8.8#dns.google 2606:4700:4700::1111#cloudflare-dns.com
                      2620:fe::9#dns.quad9.net 2001:4860:4860::8888#dns.google

Link 2 (wg0)
Current Scopes: none
     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported

Link 3 (enp88s0)
    Current Scopes: DNS LLMNR/IPv4 LLMNR/IPv6
         Protocols: +DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported
Current DNS Server: 192.168.1.254
       DNS Servers: 192.168.1.254 fe80::e675:dcff:fec3:6f93
        DNS Domain: blandford home paxton

Link 4 (wlo1)
    Current Scopes: DNS LLMNR/IPv4 LLMNR/IPv6
         Protocols: +DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported
Current DNS Server: 192.168.1.254
       DNS Servers: 192.168.1.254 fe80::e675:dcff:fec3:6f93
        DNS Domain: home

Link 5 (tun0)
    Current Scopes: DNS
         Protocols: -DefaultRoute -LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported
Current DNS Server: 172.16.144.29
       DNS Servers: 172.16.144.29 172.16.144.30
        DNS Domain: ad.corp gcp.oscaro.internal oscaro.be oscaro.com oscaro.de
                    oscaro.es oscaro.media oscaro.pt oscaro.team oscaroad.com

Link 7 (docker0)
Current Scopes: none
     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported

Link 8 (br-88ded7088275)
Current Scopes: none
     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported

Link 108 (br-46b699d0a4fe)
Current Scopes: LLMNR/IPv4 LLMNR/IPv6
     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported

Link 204 (vethdb754ab)
Current Scopes: LLMNR/IPv6
     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported

Link 206 (veth1a6300a)
Current Scopes: LLMNR/IPv6
     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported

Link 208 (veth16e4fe3)
Current Scopes: LLMNR/IPv6
     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported

Link 210 (vethc9a4339)
Current Scopes: LLMNR/IPv6
     Protocols: -DefaultRoute +LLMNR -mDNS -DNSOverTLS DNSSEC=no/unsupported
</code></pre>
</div>
<p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
  #+END<sub>small</sub><sub>code</sub>
</p>
</section>
<section id="slide-org37af065-split" data-background-position="right" data-background-opacity="0.2">
<div class="DIV" id="orgaafd408">
<p>
<code>multicast DNS</code>
</p>

</div>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">parent of 46d680f (Final build.)</td>
</tr>
</tbody>
</table>
<p>
  #+END<sub>small</sub><sub>code</sub>
<code>=====</code>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
</p>

</section>
</section>
<section>
<section id="slide-org603a902" data-background-position="right" data-background-opacity="0.2">
<h2 id="org603a902">graph</h2>

<div id="org974120c" class="figure">
<p><img src="img/graph.svg" alt="graph.svg" class="org-svg" />
</p>
</div>



<div id="org8a6c7db" class="figure">
<p><img src="img/ditaatest1.png" alt="ditaatest1.png" />
</p>
</div>

<p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
</p>
</section>
</section>
<section>
<section id="slide-org5660abf" data-background-position="right" data-background-opacity="0.2">
<h2 id="org5660abf">iptables et al.</h2>
<p>
#+begin<sub>src</sub> shell
  iptables -nvL
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">parent of 46d680f (Final build.)</td>
</tr>
</tbody>
</table>
<p>
<code>=====</code>
</p>
</section>
</section>
<section>
<section id="slide-org9d98359" data-background-position="right" data-background-opacity="0.2">
<h2 id="org9d98359">{ip,ip6,arp,eb}tables</h2>
<p>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
</p>

<p>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
#+end<sub>src</sub>
</p>
</section>
</section>
<section>
<section id="slide-orged162ef" data-background-position="right" data-background-opacity="0.2">
<h2 id="orged162ef">Packet Capture FTW</h2>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">parent of 46d680f (Final build.)</td>
</tr>
</tbody>
</table>
</section>
</section>
<section>
<section id="slide-orgac258b9" data-background-position="right" data-background-opacity="0.2">
<h2 id="orgac258b9">Cloud (AWS Specific, but other providers have comparable)</h2>
<ul>
<li>same concepts apply in cloud envs, but sometimes 'off instance'</li>
<li>VPC (Virtual Private Cloud)
<ul>
<li>Subnets (public/private)</li>
<li>provide DNS, Time services</li>
<li>Internet Gateways</li>
<li>NAT Instances</li>

</ul></li>
<li>Firewall
<ul>
<li>Security Groups (Stateful) / Resource Level</li>
<li>Network ACLs (Stateless) / Subnet Level - MTU negotiation rules maybe</li>

</ul></li>
<li>DHCP option sets - custom DNS, time servers</li>
<li>VPC Flow logs
<ul>
<li>Aggregated data (not as helpful for live debugging)</li>
<li>Some 'meta' traffic not logged (e.g. AWS Instance Metadata Service, License activation etc)</li>

</ul></li>

</ul>

<p>
<code>=====</code>
</p>
<ul>
<li>Allows manipulation of packets passing through a network interface.
<ul>
<li>firewalling - block unwanted packets</li>
<li>NAT - translate 'connections' from a subnet to another subnet
(typically from a private subnet to a public one). Maintains state
to allow response packets to be reverse translated.</li>
<li>packet mangling - Change characteristics of packets on the fly
<ul>
<li>change ports</li>
<li>change addresses</li>
<li>change flags</li>

</ul></li>

</ul></li>
<li>nftables replaces iptables et al., although iptables is still in wide use.</li>

</ul>

</section>
</section>
<section>
<section id="slide-org3cfe906" data-background-position="right" data-background-opacity="0.2">
<h2 id="org3cfe906">Cloud</h2>
<p>
(AWS Specific, but other providers have comparable)
</p>

<ul>
<li>Same concepts apply in cloud envs, but sometimes 'off instance',
managed by API rather than CLI</li>
<li>VPC (Virtual Private Cloud)
<ul>
<li>Subnets (public/private)</li>
<li>provide DNS, Time services</li>
<li>Internet Gateways</li>
<li>NAT Instances</li>

</ul></li>

</ul>
</section>
<section id="slide-org3cfe906-split" data-background-position="right" data-background-opacity="0.2">
<ul>
<li>Firewall
<ul>
<li>Security Groups (Stateful) / Resource Level</li>
<li>Network ACLs (Stateless) / Subnet Level - MTU negotiation rules maybe</li>

</ul></li>
<li>DHCP option sets - custom DNS, time servers</li>
<li>VPC Flow logs
<ul>
<li>Aggregated data (not as helpful for live debugging)</li>
<li>Some 'meta' traffic not logged (e.g. AWS Instance Metadata Service, License activation etc)</li>

</ul></li>

</ul>

<p>
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 46d680f (Final build.)
</p>

</section>
</section>
<section>
<section id="slide-org135e525" data-background-position="right" data-background-opacity="0.2">
<h2 id="org135e525">Cloud</h2>

</section>
</section>
<section>
<section id="slide-org53f96a1" data-background-position="right" data-background-opacity="0.2">
<h2 id="org53f96a1">Wrap Up</h2>
<ul>
<li><p>
<a href="https://github.com/sw1nn/network-safari">github.com/sw1nn/network-safari</a>
</p>


<div id="org22900d2" class="figure">
<p><img src="./img/repo-qr.png" alt="repo-qr.png" />
</p>
</div></li>

</ul>
</section>
</section>
</div>
</div>
<script src="./reveal.js/dist/reveal.js"></script>
<script src="./reveal.js/plugin/notes/notes.js"></script>
<script src="./reveal.js/plugin/highlight/highlight.js"></script>


<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
plugins: [RevealNotes, RevealHighlight],
slideNumber:true
});

</script>
</body>
</html>
